<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

        <services>
            <defaults public="false" />
            <service id="terry_api.event_listener.http_error_listener" class="TerryApiBundle\EventListener\HTTPErrorListener">
                <tag name="kernel.event_listener" event="kernel.exception" method="handle" priority="10" />
                <argument /> <!-- HTTPServerDefaults -->
                <argument type="service" id="serializer" />
                <argument type="service" id="terry_api.annotation.struct_reader" />
            </service>
            <defaults public="false" />
            <service id="terry_api.event_listener.response_transform_listener" class="TerryApiBundle\EventListener\ResponseTransformListener">
                <tag name="kernel.event_listener" event="kernel.view" method="transform" priority="10" />
                <argument /> <!-- HTTPServerDefaults -->
                <argument type="service" id="serializer" />
                <argument type="service" id="terry_api.annotation.struct_reader" />
            </service>
        </services>
</container>
